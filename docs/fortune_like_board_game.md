# Fortuneâ€‘like Board Game â€“ å®Œå…¨ä»•æ§˜æ›¸ v1.0

> æœ¬æ›¸ã¯ã€ã‚­ãƒ£ãƒ³ãƒã‚¹ã€ŒFortuneâ€‘like Board Game (html/js, Single File)ã€ã®**å®Ÿè£…ä»•æ§˜**ã¨**ãƒ†ã‚¹ãƒˆä»•æ§˜**ã‚’çµ±ä¸€çš„ã«å®šç¾©ã—ã¾ã™ã€‚å¯¾è±¡ã¯ç´”ç²‹ãª HTML/CSS/JavaScriptï¼ˆä¾å­˜ãªã—ï¼‰ã€‚

---

## 0. ç›®çš„ / ã‚¹ã‚³ãƒ¼ãƒ—

- å­¦å†…å¤–ã®é…å¸ƒã‚„ä¿å®ˆã‚’æƒ³å®šã—ãŸ**å®Œå…¨ã‚ªãƒªã‚¸ãƒŠãƒ«å®Ÿè£…**ï¼ˆIPä¾µå®³å›é¿ï¼‰ã€‚
- ã”æŒ‡å®šãƒãƒƒãƒ—ï¼ˆ7Ã—13ï¼‰/ åˆ†å²ãƒã‚¹ï¼ˆ`*`ï¼‰/ éŠ€è¡Œå¼·åˆ¶åœæ­¢ / ã€ŒåŒã‚¿ãƒ¼ãƒ³ã‚‚ã†ä¸€åº¦ã€ã‚«ãƒ¼ãƒ‰ / ç·è³‡ç”£ï¼ˆç¾é‡‘ï¼‹æ ªï¼‹ç‰©ä»¶ï¼‰ã§ã®**éŠ€è¡Œåˆ°ç€æ™‚å‹åˆ©**ã‚’ä»•æ§˜åŒ–ã€‚

---

## 1. ç”¨èª

- **ãƒãƒ¼ãƒ‰(Node)**: MAP ä¸Šã® `#` ã¾ãŸã¯ `*`ã€‚
- **ã‚¿ã‚¤ãƒ«(Tile)**: Node ã«ç´ã¥ãã‚²ãƒ¼ãƒ ä¸Šã®ãƒã‚¹æƒ…å ±ï¼ˆtype/name/price ç­‰ï¼‰ã€‚
- **åˆ†å²(Fork)**: `*` ãƒãƒ¼ãƒ‰ã€‚é¸æŠ UI ã‚’ä¼´ã†ã€‚
- **éš£æ¥(Adjacency)**: ä¸Šä¸‹å·¦å³ 4 è¿‘å‚ã€‚
- **å‰ãƒãƒ¼ãƒ‰(prev)**: ç›´å‰ã«å±…ãŸãƒãƒ¼ãƒ‰ï¼ˆU ã‚¿ãƒ¼ãƒ³æŠ‘æ­¢ã«åˆ©ç”¨ï¼‰ã€‚
- **ç·è³‡ç”£(Net Worth)**: ç¾é‡‘ + Î£(å„åœ°åŒºæ ªä¾¡Ã—ä¿æœ‰æ ªæ•°) + Î£(æ‰€æœ‰ç‰©ä»¶ã®ä¾¡å€¤)ã€‚

---

## 2. ç›¤é¢ä»•æ§˜ï¼ˆMAP â†’ ã‚°ãƒ©ãƒ•ï¼‰

### 2.1 ãƒãƒƒãƒ—ï¼ˆå›ºå®šï¼‰

```
######*######
#.....#.....#
#.....#.....#
#.....#.....#
#.....#.....#
#.....#.....#
######*######
```

- è¡Œæ•°: 7ã€åˆ—æ•°: 13
- `#`/`*` ã¯**é€šè¡Œå¯èƒ½ãƒãƒ¼ãƒ‰**ã€`.` ã¯ç©ºç™½ï¼ˆãƒãƒ¼ãƒ‰ãªã—ï¼‰
- **éŠ€è¡Œ**ã¯ `(r=0,c=0)`ã€ã™ãªã‚ã¡å·¦ä¸Š `#` ã‚’ `bank` ã¨ã™ã‚‹ï¼ˆ**å¤‰æ›´å¯**ï¼‰ã€‚

### 2.2 ãƒãƒ¼ãƒ‰ç”Ÿæˆ

- `indexAt[r][c]` ã«ãƒãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆå­˜åœ¨ã—ãªã‘ã‚Œã° `-1`ï¼‰ã€‚
- `nodes[ix] = { r, c, kind: '#|*' }`
- `tiles[ix]` ã¯åˆæœŸ `{ ix, r, c, fork, type:'free', ... }` ã‚’ç”Ÿæˆã€‚
- `adj[ix]` ã¯ä¸Šä¸‹å·¦å³ã®é€šè¡Œå¯èƒ½ãƒãƒ¼ãƒ‰ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹é…åˆ—ã€‚

### 2.3 ã‚¿ã‚¤ãƒ«ç¨®åˆ¥å‰²å½“ï¼ˆåˆæœŸï¼‰

- `bank` ã¯ `indexAt[0][0]`ã€‚
- ãã®ä»–ã¯**è¡Œå„ªå…ˆ**ã§ä»¥ä¸‹ã‚’é †ã«å‰²å½“ï¼š
  - `suit` Ã—4ï¼ˆâ™ â™¥â™¦â™£ ã‚’å‡ç­‰æ•£å¸ƒï¼‰
  - `prop` Ã—12ï¼ˆåœ°åŒº A/B/C/D ã‚’ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ­ãƒ“ãƒ³ã€`price`=220/260/300/340ï¼‰
  - `chance` Ã—5ï¼ˆâ“ï¼‰
  - `tax` Ã—2ï¼ˆğŸ’¸ã€`tax`=120ï¼‰
  - `rest` Ã—1ï¼ˆâ—ï¼‰
- `fork` è¦–è¦šã¯ `t.fork = (kind==='*')` ã§è¡¨ç¾ï¼ˆtype ã¯ä¸Šè¨˜å‰²å½“ã‚’å„ªå…ˆï¼‰ã€‚

---

## 3. ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«

### 3.1 ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼

- 2ã€œ4 äººã€é–‹å§‹æ‰€æŒé‡‘ 2000Gã€é–‹å§‹ä½ç½®ã¯ `bank`ã€‚
- è¿½åŠ çŠ¶æ…‹ï¼š`suits:Set` / `stocks:{A,B,C,D}` / `level` åˆæœŸ 1 / `halfToll` / `bonusDivTimes` / `nextRoll` / `pendingFork`ï¼ˆæ¬¡ã‚¿ãƒ¼ãƒ³é€²è¡Œäºˆç´„ï¼‰ã€‚

### 3.2 ã‚¿ãƒ¼ãƒ³ãƒ•ã‚§ãƒ¼ã‚º

1. **å¾…æ©Ÿ**ï¼ˆRoll å¯ï¼‰
2. **ç§»å‹•**ï¼ˆd6 ã‚¹ãƒ†ãƒƒãƒ—ã€‚é€”ä¸­ã®**åˆ†å²**ã‚„**éŠ€è¡Œå¼·åˆ¶åœæ­¢**ã‚’å‡¦ç†ï¼‰
3. **é¸æŠ**ï¼ˆç€åœ°ã‚¿ã‚¤ãƒ«åŠ¹æœï¼šè³¼å…¥/æŠ•è³‡/é€šè¡Œæ–™/ã‚«ãƒ¼ãƒ‰ ç­‰ï¼‰
4. **è¿½åŠ ãƒ­ãƒ¼ãƒ«**ï¼ˆè©²å½“æ™‚ã®ã¿, åŒã‚¿ãƒ¼ãƒ³ 1 å›ï¼‰
5. **ã‚¿ãƒ¼ãƒ³çµ‚äº†** â†’ æ¬¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼

### 3.3 ãƒ€ã‚¤ã‚¹

- é€šå¸¸ã¯**å„ã‚¿ãƒ¼ãƒ³ 1 å›ã®ã¿**ã€‚
- ãƒ™ãƒ³ãƒãƒ£ãƒ¼ã‚«ãƒ¼ãƒ‰ã€Œ**ãƒ€ã‚¤ã‚¹ã‚‚ã†ä¸€åº¦ï¼**ã€ã§**åŒã‚¿ãƒ¼ãƒ³ä¸­ã« 1 å›ã ã‘**è¿½åŠ ãƒ­ãƒ¼ãƒ«å¯ã€‚
- ãƒ•ãƒ©ã‚°ï¼š`rolledThisTurn`, `extraRollAvailable`, `extraRollConsumed`ã€‚
- åˆ¤å®š: `canRoll()` = `phase==='å¾…æ©Ÿ' && (!rolledThisTurn || (extraRollAvailable && !extraRollConsumed))`ã€‚

### 3.4 ç§»å‹•

- 1 ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã« `adj[cur]` ã‹ã‚‰æ¬¡ãƒãƒ¼ãƒ‰ã‚’é¸ã¶ï¼š
  - `prev` ãŒå­˜åœ¨ã—ã€ã‹ã¤é¸æŠè‚¢ãŒ 2 ä»¥ä¸Šãªã‚‰ **U ã‚¿ãƒ¼ãƒ³ã‚’é™¤å¤–**ã€‚
  - å€™è£œãŒ 1 ã¤ãªã‚‰è‡ªå‹•å‰é€²ã€‚
  - å€™è£œãŒ 2 ã¤ãªã‚‰ **åˆ†å²**ï¼š
    - **é€šéæ™‚**: ã‚¹ãƒ†ãƒƒãƒ—é€²è¡Œä¸­ã«é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºâ†’é¸ã‚“ã æ–¹å‘ã«å³é€²è¡Œï¼ˆæ®‹ã‚Šã‚¹ãƒ†ãƒƒãƒ—ã‚’ç¶šè¡Œï¼‰ã€‚
    - **åœæ­¢æ™‚**: åœæ­¢ç›´å¾Œã«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§é¸æŠâ†’`pendingFork={nodeIx,nextIx}` ã‚’ä¿å­˜ï¼ˆ**æ¬¡ã‚¿ãƒ¼ãƒ³ã®æœ€åˆã® 1 æ­©**ã§è‡ªå‹•æ¶ˆè²»ï¼‰ã€‚
- **éŠ€è¡Œå¼·åˆ¶åœæ­¢**: æ®‹ã‚Šã‚¹ãƒ†ãƒƒãƒ—ãŒã‚ã£ã¦ã‚‚ã€éŠ€è¡Œã«åˆ°é”ã—ãŸç¬é–“ã«ç§»å‹•ã‚’æ‰“ã¡åˆ‡ã‚‹ã€‚

### 3.5 å‹åˆ©æ¡ä»¶

- **éŠ€è¡Œç€åœ°æ™‚ã®ã¿**ãƒã‚§ãƒƒã‚¯ï¼š`netWorth(p) >= winTarget` ã§å³å‹åˆ©ã€‚
- `netWorth(p) = cash + Î£(stock[d]*price[d]) + Î£(ownedProp.price)`

### 3.6 ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼ˆéŠ€è¡Œï¼‰

- 4 ã‚¹ãƒ¼ãƒˆï¼ˆâ™ â™¥â™¦â™£ï¼‰ãŒæƒã£ã¦ã„ã‚Œã°ã€éŠ€è¡Œåˆ°ç€ã§æ˜‡æ ¼ï¼š
  - çµ¦ä¸ = `300 + 50*(level-1) + 10*(æ‰€æœ‰ç‰©ä»¶æ•°)`
  - é…å½“ = `floor(Î£(price[d]*stocks[d]*0.5) * bonusDivTimes)`
  - `bonusDivTimes` ã¯æ¶ˆè²»ã—ã¦ `1.0` ã«æˆ»ã™ã€‚`suits` ã¯ãƒªã‚»ãƒƒãƒˆã€‚

### 3.7 ç‰©ä»¶ / é€šè¡Œæ–™ / æŠ•è³‡

- **è³¼å…¥**: ç©ºãç‰©ä»¶ã«åœæ­¢æ™‚ã€ä¾¡æ ¼ã¡ã‚‡ã†ã©ã§è³¼å…¥å¯ã€‚
- **é€šè¡Œæ–™**: `max(10, round(price/5))`ã€‚`halfToll` æŒã¡ãªã‚‰ 1 å›ã ã‘åŠé¡ã€‚
- **æŠ•è³‡**: è‡ªå·±æ‰€æœ‰ã« 50ã€œ500Gï¼ˆ50 åˆ»ã¿ï¼‰ã€‚ç‰©ä»¶ä¾¡å€¤ `+round(0.8*æŠ•è³‡é¡)`ã€åœ°åŒºæ ªä¾¡ `+max(1,floor(æŠ•è³‡é¡/100))`ã€‚

### 3.8 æ ªï¼ˆåœ°åŒº A/B/C/Dï¼‰

- åˆæœŸæ ªä¾¡ 10ã€ç™ºè¡Œæšæ•°ã¯ä¼šè¨ˆä¸Šã®ã¿ã€‚
- 10 æ ªå˜ä½ã§å£²è²·ï¼ˆUI ä¸Šã¯ Â±10ï¼‰ã¨ã—ã€ä¾¡æ ¼ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ = `Â±floor(qty/10)`ã€‚

### 3.9 ãƒ™ãƒ³ãƒãƒ£ãƒ¼ã‚«ãƒ¼ãƒ‰ï¼ˆæŠœç²‹ï¼‰

- `+200G/-150G` / **ãƒ€ã‚¤ã‚¹ã‚‚ã†ä¸€åº¦**ï¼ˆåŒã‚¿ãƒ¼ãƒ³ 1 å›ï¼‰/ **éŠ€è¡Œãƒ¯ãƒ¼ãƒ—** / **å…¨åœ°åŒº Â±1** / **ç„¡æ–™æŠ•è³‡ 200G** / **ç¨é‚„ä»˜ +100G** / **å…¨å“¡ã‹ã‚‰ +50G** / **é€šè¡Œæ–™åŠé¡ 1 å›** / **æ¬¡æ˜‡æ ¼ã®é…å½“ 1.5x** / **æ¬¡å‡ºç›®=6**ã€‚

### 3.10 ç ´ç”£

- è² æ®‹é«˜æ™‚ã«è‡ªå‹•æ¸…ç®—ï¼šé«˜æ ªä¾¡é †ã«æ ªå£²å´â†’å®‰ç‰©ä»¶ã‹ã‚‰ 50% ã§å£²å´â†’ãªãŠãƒã‚¤ãƒŠã‚¹ãªã‚‰**è„±è½**ã€‚

---

## 4. UI/UX ä»•æ§˜

### 4.1 ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ > ãƒœã‚¿ãƒ³ï¼‰

- **ğŸ² ãƒ€ã‚¤ã‚¹**: `å¾…æ©Ÿ` ã‹ã¤ `canRoll()` ã®ã¨ãã®ã¿æœ‰åŠ¹ã€‚
- **ğŸ¬ è³¼å…¥**: ç¾åœ¨ã‚¿ã‚¤ãƒ«ãŒç©ºãç‰©ä»¶ã‹ã¤æ‰€æŒé‡‘ â‰¥ ä¾¡æ ¼ã€‚
- **ğŸ“ˆ æŠ•è³‡**: ç¾åœ¨ã‚¿ã‚¤ãƒ«ãŒè‡ªç‰©ä»¶ã€‚
- **ğŸ¦ æ ª**: éŠ€è¡Œã‚¿ã‚¤ãƒ«ã«å±…ã‚‹ã¨ãã€‚
- **â­ï¸ ã‚¿ãƒ¼ãƒ³çµ‚äº†**: å¸¸æ™‚å¯ï¼ˆå‹åˆ©å¾Œã¯ä¸å¯ï¼‰ã€‚
- **å‹åˆ©ç·è³‡ç”£(G)**: `winTarget`ã€‚å¤‰æ›´ã§ãƒ­ã‚°è¡¨ç¤ºï¼†å³åæ˜ ã€‚

### 4.2 ãƒ€ã‚¤ã‚¢ãƒ­ã‚°

- **Buy/Invest/Market/Card/Fork** ã‚’ç”¨æ„ã€‚
- **Fork**: å€™è£œ 2 æ–¹å‘ã‚’ \*\*çŸ¢å°ï¼ˆâ†â†’â†‘â†“ï¼‰\*\*ã§è¡¨ç¤ºã€‚

### 4.3 è¡¨ç¤º

- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚«ãƒ¼ãƒ‰ï¼šç¾é‡‘ / ç·è³‡ç”£ / ä½ç½® / ãƒ¬ãƒ™ãƒ« / ã‚¹ãƒ¼ãƒˆ / æ ª / æ‰€æœ‰ç‰©ä»¶ä¸€è¦§ã€‚
- ç›¤é¢ï¼šã‚¿ã‚¤ãƒ«ä¸­å¤®ã«åç§°ãƒ»ã‚¨ãƒ³ãƒ–ãƒ¬ãƒ ã€‚æ‰€æœ‰è€…ãƒ©ãƒ™ãƒ«/ä¾¡æ ¼/åœ°åŒºã‚’ãƒãƒƒã‚¸è¡¨ç¤ºã€‚ã‚³ãƒã¯**ã‚¿ã‚¤ãƒ« DOM ä¸­å¿ƒ**ã€‚

---

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆType å®šç¾©ï¼‰

```ts
// Node/Tile graph
interface Node { r:number; c:number; kind:'#'|'*' }
interface Tile {
  ix:number; r:number; c:number; fork:boolean;
  type:'free'|'bank'|'prop'|'suit'|'chance'|'tax'|'rest';
  name:string; em?:string; owner:number|null; price:number; district?:'A'|'B'|'C'|'D';
  suit?: 'â™ '|'â™¥'|'â™¦'|'â™£'; tax?:number;
}

// Stocks
interface StockEntry { price:number; issued:number }

// Player
interface Player {
  id:number; name:string; color:string;
  cash:number; pos:number; lastPos:number|null; level:number;
  suits:Set<'â™ '|'â™¥'|'â™¦'|'â™£'>; stocks:{A:number;B:number;C:number;D:number};
  halfToll:boolean; bonusDivTimes:number; nextRoll:number|null;
  pendingFork: {nodeIx:number; nextIx:number} | null; out:boolean;
}

// Game (ä¸»è¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã¿)
interface Game {
  players:Player[]; cur:number; turn:number; phase:'å¾…æ©Ÿ'|'ç§»å‹•'|'é¸æŠ'|'çµ‚äº†';
  tiles:Tile[]; adj:number[][]; stocks:Record<'A'|'B'|'C'|'D', StockEntry>;
  rolledThisTurn:boolean; extraRollAvailable:boolean; extraRollConsumed:boolean;
  winTarget:number; winner:number|null;
}
```

---

## 6. é–¢æ•°ä»•æ§˜ï¼ˆæŠœç²‹ãƒ»ç¢ºå®šï¼‰

> ãã‚Œãã‚Œå‰¯ä½œç”¨ãƒ»å‰æãƒ»å¤±æ•—æ¡ä»¶ã‚’æ˜è¨˜ã—ã¾ã™ã€‚

- `init(numPlayers=2)`
  - **å‰¯ä½œç”¨**: ç›¤é¢/æ ª/ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼/UI åˆæœŸåŒ–ã€ãƒ­ã‚°ã«ã€Œã‚²ãƒ¼ãƒ é–‹å§‹ï¼ã€
- `canRoll(): boolean`
  - **çœŸ**: `phase==='å¾…æ©Ÿ' && (!rolledThisTurn || (extraRollAvailable && !extraRollConsumed))`
- `rollDice(): 1..6`
  - `player.nextRoll` ãŒã‚ã‚Œã°ãã‚Œã‚’æ¶ˆè²»ã€ãªã‘ã‚Œã°ä¹±æ•° 1..6ã€‚
- `moveBy(p, steps)`
  - **åˆ†å²**: é€šéæ™‚/åœæ­¢æ™‚ã®é¸æŠãƒ­ã‚¸ãƒƒã‚¯ï¼ˆÂ§3.4ï¼‰ã€‚
  - **éŠ€è¡Œå¼·åˆ¶åœæ­¢**: `bank` åˆ°é”æ™‚ã«æ®‹æ­©æ•°ã‚’ç ´æ£„ã€‚
- `onBank(p)`
  - **æ˜‡æ ¼ï¼†é…å½“**ï¼ˆÂ§3.6ï¼‰ã€**å‹åˆ©åˆ¤å®š**ï¼ˆÂ§3.5ï¼‰ã€‚
- `netWorth(p)`
  - ç¾é‡‘ï¼‹æ ªè©•ä¾¡ï¼‹ç‰©ä»¶ä¾¡å€¤åˆç®—ï¼ˆÂ§3.5ï¼‰ã€‚
- `propToll(prop)`
  - `max(10, round(price/5))`ã€‚
- `investProperty(p, prop, amount, free=false)`
  - **æˆåŠŸæ¡ä»¶**: 50ã€œ500, 50 åˆ»ã¿, æ®‹é«˜ååˆ† or `free`ã€‚
  - **åŠ¹æœ**: ä¾¡å€¤ +0.8Ã—ã€åœ°åŒºæ ªä¾¡ +max(1, floor(amount/100))ã€‚
- `buyStock/sellStock`
  - 10 æ ªå˜ä½ã€ä¾¡æ ¼ã«é€£å‹•ã€‚**æ‰‹æ•°æ–™ãªã—**ã€‚
- `tryLiquidate(p)`
  - æ ªå£²å´â†’ç‰©ä»¶ 50% å£²å´â†’ãªãŠãƒã‚¤ãƒŠã‚¹ã§ `out=true`ã€‚
- `askFork(curIx, options)`
  - UI ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ï¼ˆçŸ¢å°ãƒœã‚¿ãƒ³ï¼‰ã€‚**ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰**ã§ã¯ `options[0]` è‡ªå‹•é¸æŠã€‚

---

## 7. çŠ¶æ…‹é·ç§»ï¼ˆãƒ†ã‚­ã‚¹ãƒˆå›³ï¼‰

```
[å¾…æ©Ÿ] --roll--> [ç§»å‹•] --åˆ°ç€--> [é¸æŠ] --(è¿½åŠ ãƒ­ãƒ¼ãƒ«å¯?)--> [å¾…æ©Ÿ] --end--> æ¬¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
                 |--éŠ€è¡Œåˆ°é”é€”ä¸­--> [é¸æŠ(éŠ€è¡Œ)]
```

- è¿½åŠ ãƒ­ãƒ¼ãƒ«å¯ã¯ã€ŒåŒã‚¿ãƒ¼ãƒ³ä¸­ã«æœªæ¶ˆè²»ã® extraRollAvailable=trueã€ãŒæ¡ä»¶ã€‚

---

## 8. æ°¸ç¶šåŒ–ï¼ˆSave/Loadï¼‰

- **å½¢å¼**: JSONï¼ˆlocalStorage `bt_save`ï¼‰ã€‚
- **å†…å®¹**: `players(â€»suits ã¯é…åˆ—ã«å¤‰æ›) / cur / turn / phase / stocks / tiles / rolledThisTurn / extraRoll*`ã€‚
- **äº’æ›**: æ—¢å­˜ã‚­ãƒ¼ãŒç„¡ã„å ´åˆã¯åˆæœŸå€¤ã‚’æ¡ç”¨ã™ã‚‹ï¼ˆå‰æ–¹äº’æ›ï¼‰ã€‚

---

## 9. å®šæ•°ãƒ»ä¿‚æ•°ï¼ˆv1.0ï¼‰

| é …ç›®    | å€¤                                                  |
| ----- | -------------------------------------------------- |
| åˆæœŸç¾é‡‘  | 2000 G                                             |
| æ ªä¾¡åˆæœŸå€¤ | 10                                                 |
| æŠ•è³‡å—ä»˜  | 50ã€œ500 Gï¼ˆ50 åˆ»ã¿ï¼‰                                    |
| æŠ•è³‡åŠ¹ãç‡ | +0.8 Ã— æŠ•è³‡é¡                                         |
| é€šè¡Œæ–™   | max(10, round(ç‰©ä»¶ä¾¡å€¤/5))                             |
| ç¨é‡‘    | 120 G                                              |
| çµ¦ä¸    | 300 + 50Ã—(Lv-1) + 10Ã—æ‰€æœ‰ç‰©ä»¶æ•°                         |
| é…å½“    | floor(Î£(price[d]\*stocks[d]\*0.5) Ã— bonusDivTimes) |

---

## 10. å—å…¥ãƒ†ã‚¹ãƒˆï¼ˆAcceptance Testsï¼‰

> UI å·¦ã€ŒğŸ§ªãƒ†ã‚¹ãƒˆã€ç›¸å½“ï¼ˆT1ã€œT4ï¼‰ï¼‹æœ¬æ›¸ã§è¿½åŠ ï¼ˆT5ã€œT12ï¼‰ã€‚

- **T1**: `netWorth` ãŒã€Œç¾é‡‘ï¼‹æ ªï¼‹ç‰©ä»¶ã€ã‚’è¿”ã™ã€‚
- **T2**: ã€Œãƒ€ã‚¤ã‚¹ã‚‚ã†ä¸€åº¦ï¼ã€ã§**åŒã‚¿ãƒ¼ãƒ³ä¸­**ã« 2 å›ç›®ãƒ­ãƒ¼ãƒ«ãŒå¯èƒ½ã€‚
- **T3**: éŠ€è¡Œ**å¼·åˆ¶åœæ­¢**ãŒå‹•ä½œã™ã‚‹ã€‚
- **T4**: åˆ†å²ã«**åœæ­¢**ã—ãŸã‚‰**æ¬¡ã‚¿ãƒ¼ãƒ³æ–¹å‘ãŒäºˆç´„**ã•ã‚Œã‚‹ã€‚
- **T5**: è¿½åŠ ãƒ­ãƒ¼ãƒ«ã‚’ 1 å›æ¶ˆè²»ã—ãŸã‚‰ã€**åŒã‚¿ãƒ¼ãƒ³ 3 å›ç›®ã¯ä¸å¯**ã€‚
- **T6**: `halfToll` ãŒ 1 å›ã ã‘æœ‰åŠ¹ã€‚
- **T7**: 4 ã‚¹ãƒ¼ãƒˆæƒãˆâ†’éŠ€è¡Œã§**æ˜‡æ ¼**ï¼ˆçµ¦ä¸ï¼‹é…å½“ï¼‰ã€‚
- **T8**: æŠ•è³‡ 200G â†’ ç‰©ä»¶ä¾¡å€¤ +160 / åœ°åŒºæ ªä¾¡ +2ã€‚
- **T9**: ç¨é‡‘ã§è² æ®‹é«˜ â†’ æ ª/ç‰©ä»¶ã®**è‡ªå‹•æ¸…ç®—** â†’ ãªãŠè² ãªã‚‰ `out=true`ã€‚
- **T10**: Market å£²è²·ã§æ ªä¾¡ãŒ `Â±floor(qty/10)` å¤‰åŒ–ã€‚
- **T11**: ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºå¾Œã‚‚**ã‚³ãƒãŒã‚¿ã‚¤ãƒ«ä¸­å¿ƒ**ã«å†é…ç½®ã€‚
- **T12**: Saveâ†’Resetâ†’Load ã§ã‚²ãƒ¼ãƒ çŠ¶æ…‹ãŒå¾©å…ƒã€‚

å„ãƒ†ã‚¹ãƒˆã¯**å‰æï¼æ“ä½œï¼æœŸå¾…çµæœ**ã‚’æ˜è¨˜ã—ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã§å‰¯ä½œç”¨ã‚’æˆ»ã™ã€‚

---

## 11. ã‚¨ãƒ©ãƒ¼å‡¦ç† / ã‚¬ãƒ¼ãƒ‰

- ç„¡åŠ¹æ“ä½œï¼ˆè³‡é‡‘ä¸è¶³/å¯¾è±¡å¤–ã‚¿ã‚¤ãƒ«/ãƒ€ã‚¤ã‚¹ä¸å¯ï¼‰æ™‚ã¯**ä½•ã‚‚ã—ãªã„**ï¼‹ãƒ­ã‚°å‡ºåŠ›ã€‚
- åˆ†å²é¸æŠã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯**è¨±å¯ã—ãªã„**ï¼ˆé¸æŠå¿…é ˆï¼‰ã€‚
- ã‚°ãƒ©ãƒ•ä¸æ•´åˆï¼ˆç†è«–ä¸Šç™ºç”Ÿã—ãªã„ï¼‰ã¯æœ€åˆã®å€™è£œã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã€‚

---

## 12. éæ©Ÿèƒ½è¦ä»¶

- **ä¾å­˜ãªã—**ï¼šã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ `index.html` å˜ä½“å‹•ä½œã€‚
- **äº’æ›**ï¼šChrome/Edge/Firefox æœ€æ–°ã€ãƒ¢ãƒã‚¤ãƒ«å¹…ã§ã‚‚å¯èª­ã€‚
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**ï¼šãƒãƒ¼ãƒ‰æ•° \~100 æœªæº€ã€DOM å†æç”»ã¯å·®åˆ†ã§è»½é‡ã€‚
- **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**ï¼šãƒœã‚¿ãƒ³ã¯ãƒ©ãƒ™ãƒ«ï¼‹ã‚¢ã‚¤ã‚³ãƒ³ã€ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã¯ `dialog`ã€‚

---

## 13. æ‹¡å¼µä½™åœ°ï¼ˆBacklogï¼‰

- ç‰©ä»¶ã‚»ãƒƒãƒˆãƒœãƒ¼ãƒŠã‚¹ã€åœ°åŒºç‹¬è‡ªåŠ¹æœã€ã‚«ãƒ¼ãƒ‰è¿½åŠ ã€AIã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¯¾æˆ¦ã€ã‚¢ãƒ‹ãƒ¡å¼·åŒ–ã€ã‚¹ãƒãƒ›æœ€é©åŒ–ï¼ˆã‚¿ãƒƒãƒ—é ˜åŸŸæ‹¡å¤§ï¼‰ã€å›½éš›åŒ–ï¼ˆi18nï¼‰ã€‚
- ã‚¿ã‚¤ãƒ«é…ç½®ã‚’**åº§æ¨™æŒ‡å®š YAML**ã§å¤–éƒ¨åŒ–ã€‚

---

## 14. æ—¢çŸ¥ã®åˆ¶ç´„

- ç‰©ä»¶/ã‚«ãƒ¼ãƒ‰ã®åˆæœŸé…ç½®ã¯**è‡ªå‹•å‰²å½“**ï¼ˆè¡Œå„ªå…ˆï¼‰ã§ã‚ã‚Šã€å³å¯†ãªãƒãƒ©ãƒ³ã‚¹èª¿æ•´ã¯æœªå®Ÿæ–½ã€‚å¿…è¦ã«å¿œã˜ã¦åº§æ¨™å›ºå®šã«åˆ‡æ›¿å¯èƒ½ã€‚
- `U` ã‚¿ãƒ¼ãƒ³ã¯**æŠ‘æ­¢**ï¼ˆå€™è£œ>1 ã®ã¨ãå‰ãƒãƒ¼ãƒ‰ã‚’é™¤å¤–ï¼‰ã€‚ä»•æ§˜å¤‰æ›´å¯ã€‚

---

## 15. å¤‰æ›´å±¥æ­´

- **v1.0**: åˆç‰ˆã€‚åˆ†å²/éŠ€è¡Œå¼·åˆ¶åœæ­¢/åŒã‚¿ãƒ¼ãƒ³è¿½åŠ ãƒ­ãƒ¼ãƒ«/ç·è³‡ç”£=ç¾é‡‘ï¼‹æ ªï¼‹ç‰©ä»¶/å—å…¥ãƒ†ã‚¹ãƒˆæ‹¡å¼µã€‚

---

### ä»˜éŒ² A: ä¸»è¦ã‚¤ãƒ™ãƒ³ãƒˆã‚·ãƒ¼ã‚±ãƒ³ã‚¹ï¼ˆæ“¬ä¼¼ã‚³ãƒ¼ãƒ‰ï¼‰

```text
onClick(ğŸ²):
  if !canRoll() return
  isExtra := rolledThisTurn && extraRollAvailable && !extraRollConsumed
  if !isExtra then rolledThisTurn=true else extraRollConsumed=true
  steps := rollDice()
  moveBy(currentPlayer, steps)

moveBy(p, steps):
  phase='ç§»å‹•'
  for i=1..steps:
    candidates := adj[p.pos]
    if prev exists and |candidates|>1: candidates := candidates - {prev}
    next := (|candidates|==1) ? candidates[0]
            : (|candidates|==2) ?
                (p.pendingFork at this node ? consume it : askFork())
            : fallback
    step to next
    if next==bank and i<steps: break // å¼·åˆ¶åœæ­¢
  onLand()
  if landed on fork with two options:
    p.pendingFork := askFork() // æ¬¡ã‚¿ãƒ¼ãƒ³ç”¨
```

---

### ä»˜éŒ² B: ä¿å­˜ãƒ‡ãƒ¼ã‚¿ä¾‹

```json
{
  "players": [{
    "id":0,"name":"P1","color":"#ff5e5e","cash":2120,
    "pos":5,"lastPos":4,"level":1,
    "suits":["â™ ","â™¥"],
    "stocks":{"A":10,"B":0,"C":0,"D":0},
    "halfToll":false,"bonusDivTimes":1.0,"nextRoll":null,
    "pendingFork":null,"out":false
  }],
  "cur":0,"turn":7,"phase":"å¾…æ©Ÿ",
  "stocks":{"A":{"price":12,"issued":10},"B":{"price":10,"issued":0},"C":{"price":10,"issued":0},"D":{"price":10,"issued":0}},
  "tiles":[{"ix":0,"type":"bank", ...}]
}
```

---

## æœ€çµ‚ç¢ºèªã®ãŠé¡˜ã„ï¼ˆè¦ä»¶ãƒ–ãƒ¬æŠ‘æ­¢ï¼‰

- **éŠ€è¡Œã®åº§æ¨™**ã¯ `(0,0)` ã§ç¢ºå®šã§è‰¯ã„ã§ã™ã‹ï¼Ÿ åˆ¥åº§æ¨™æŒ‡å®šãŒã‚ã‚Œã°ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚
- **U ã‚¿ãƒ¼ãƒ³å¯å¦**ï¼šç¾çŠ¶ã¯æŠ‘æ­¢ï¼ˆå€™è£œ>1 ã§å‰ãƒãƒ¼ãƒ‰é™¤å¤–ï¼‰ã€‚U ã‚¿ãƒ¼ãƒ³è¨±å¯ã«å¤‰æ›´ã—ã¾ã™ã‹ï¼Ÿ
- **åˆæœŸé…ç½®**ï¼šç‰©ä»¶/ã‚«ãƒ¼ãƒ‰/ç¨/ä¼‘æ†©ã®**åº§æ¨™ã‚’å›ºå®š**ã—ãŸã„å ´åˆã¯ã€`(r,c)` ã®ä¸€è¦§ã‚’ã”æç¤ºãã ã•ã„ï¼ˆå³æ™‚åæ˜ å¯ï¼‰ã€‚

